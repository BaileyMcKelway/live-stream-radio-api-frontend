import React, { Component } from 'react';
import { connect } from 'react-redux';
import axios from 'axios';

const startOnClick = async () => {
  await axios.get('/api/stream/start');
};
const stopOnClick = async () => {
  await axios.get('/api/stream/stop');
};
const stopOnRestart = async () => {
  await axios.get('/api/stream/restart');
};

import './StreamStatus.css';
export const DisconnectedStreamStatus = (props) => {
  const status = props.status.isRunning;
  return (
    <div className="stream_status">
      <div className="card-content white-text">
        <span className="card-title">Stream Status</span>
        {status ? <h1>Online</h1> : <h1>Offline</h1>}
      </div>
      <div className="card-action">
        <button onClick={startOnClick}>Start</button>
        <button onClick={stopOnClick}>Stop</button>
        <button onClick={stopOnRestart}>Restart</button>
      </div>
    </div>
  );
};

const mapStateToProps = (state) => ({
  status: state.status,
});

export const StreamStatus = connect(mapStateToProps)(DisconnectedStreamStatus);